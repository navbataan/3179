<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Green Space vs Population Density for Melbourne (2024)</title>

  <link rel="stylesheet" href="https://unpkg.com/purecss@3.0.0/build/pure-min.css">
  <link rel="stylesheet" href="https://unpkg.com/purecss@3.0.0/build/grids-responsive-min.css">

  <script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-lite@5"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>

  <style>
    :root {
      --bg:#0e0f12;
      --panel:#ffffff;
      --ink:#1a1a1a;
      --ink-sub:#555;
      --accent:#2f855a;
      --radius:16px;
      --shadow:0 10px 24px rgba(0,0,0,.12);
    }

    html, body {
      height:100%;
      margin:0;
      background:url("background.pdf") no-repeat center center fixed;
      background-size:cover;
      background-color:#0e0f12;
      font-family:"Helvetica Neue", Helvetica, Arial, sans-serif;
      font-size:16px;
      line-height:1.55;
      color:#111;
    }

    .wrap {max-width:1100px;margin:0 auto;padding:24px 16px 80px;}

    .hero {
      background:linear-gradient(180deg,#1a202c 0%,#0e0f12 100%);
      border-radius:var(--radius);
      padding:28px 24px;
      margin-bottom:24px;
      color:#fff;
      box-shadow:var(--shadow);
    }

    .hero h1 {
      font-size:24px;
      font-weight:600;
      margin:0 0 6px;
    }

    .hero p {color:#d0d4db;font-size:15px;}

    .card {
      background:var(--panel);
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      padding:32px 40px;
      margin:0 0 40px;
      display:flex;
      flex-wrap:wrap;
      align-items:center;
      justify-content:space-between;
      gap:40px;
    }

    .card.reverse {flex-direction:row-reverse;}

    .chart {
      flex:1 1 48%;
      min-width:340px;
      min-height:320px;
      border-radius:12px;
      background:#fafafa;
      border:1px solid #eee;
      overflow:hidden;
    }

    .textbox {flex:1 1 40%;min-width:340px;}
    .textbox h2 {font-size:18px;font-weight:600;margin:0 0 8px;color:var(--ink);}
    .textbox p {font-size:15px;color:var(--ink-sub);margin:8px 0;}
    .kicker {text-transform:uppercase;letter-spacing:.08em;color:var(--accent);font-weight:700;font-size:13px;}

    .twins {display:flex;flex-wrap:wrap;gap:32px;justify-content:space-between;}
    .twins > div.chart {flex:1 1 48%;min-width:460px;}

    footer {
      background:var(--panel);
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      padding:32px 40px;
      margin-top:60px;
      border-top:4px solid #e5e7eb;
      font-family:Helvetica,Arial,sans-serif;
    }

    .vega-actions,.vega-bind-name {font-size:13px;}
    .vega-embed .vega-bind label {font-size:13px;}
    text {white-space:pre-wrap !important;}
  </style>
</head>

<body>
  <div class="wrap">
    <header class="hero">
      <h1>Green Space vs. Population Density in Melbourne & Surrounds (2024)</h1>
      <p>Exploring how green space varies across Melbourne’s suburbs, from the dense inner city to the leafy outer regions, and how these patterns reveal the balance between population growth and liveability.</p>
    </header>

    <section class="card">
      <div class="chart" id="chart-map"></div>
      <div class="textbox">
        <div class="kicker">1 · Mapping the City</div>
        <h2>Where is Melbourne’s Green Space?</h2>
        <p>This map sets the scene. Darker blue tones show higher population density, while the green circles scale with the proportion of green space in each Local Government Area (LGA).</p>
      </div>
    </section>

    <section class="card reverse">
      <div class="textbox">
        <div class="kicker">2 · Relationship</div>
        <h2>Do Denser Areas Have Less Green?</h2>
        <p>Each dot here represents one Victorian LGA. On the x-axis is population density, and on the y-axis is the share of green space.</p>
      </div>
      <div class="chart" id="chart-scatter"></div>
    </section>

    <section class="card">
      <div class="twins">
        <div id="chart-bars-top" class="chart"></div>
        <div id="chart-bars-bottom" class="chart"></div>
      </div>
      <div class="textbox" style="margin-top:20px;">
        <div class="kicker">3 · Who Leads and Who Lags?</div>
        <h2>Which LGAs Stand Out?</h2>
        <p>These charts reveal the top and bottom LGAs by both green space and population density.</p>
      </div>
    </section>

    <section class="card reverse">
      <div class="textbox">
        <div class="kicker">4 · Distribution</div>
        <h2>How Is Green Space Distributed?</h2>
        <p>The box plot summarises how green space varies within density groups. The histogram shows that most LGAs cluster around moderate green space coverage.</p>
      </div>
      <div class="chart" id="chart-box"></div>
    </section>

    <section class="card">
      <div class="chart" id="chart-hist"></div>
      <div class="textbox">
        <div class="kicker">5 · The Bigger Picture</div>
        <h2>Understanding Melbourne’s Balance</h2>
        <p>From dense inner cores to spacious green belts, these visuals highlight Melbourne’s diversity and the trade-off between growth and open space.</p>
      </div>
    </section>

    <footer>
      <h2 style="margin-top:0;font-size:18px;">Metadata & Acknowledgements</h2>
      <p><strong>References (APA 7th)</strong></p>
      <ul style="margin-top:0;font-size:15px;">
        <li>Australian Bureau of Statistics. (2024). <em>Regional Population Density Data 2024 [Dataset]</em>. https://www.abs.gov.au</li>
        <li>Victorian Planning Authority. (2024). <em>Victorian Green Space and Urban Land Use Data 2024 [Dataset]</em>. https://vpa.vic.gov.au</li>
        <li>Department of Environment, Land, Water and Planning. (2024). <em>VicMap Administrative Boundaries [Spatial Data]</em>. https://www.land.vic.gov.au</li>
      </ul>
      <p><strong>AI Assistance Statement:</strong><br>
      Parts of this project (including code debugging and visualisation layout refinement) were developed with the assistance of OpenAI’s GPT-5 model (ChatGPT, 2025). All interpretations and final design decisions are the author’s own.</p>
      <p style="text-align:right;color:#777;margin-top:30px;font-size:14px;">Author: Navneet Bataan (2025)</p>
    </footer>
  </div>

  <!-- Vega-Lite charts -->
  <script>
    const opts = { actions:false, renderer:"canvas", tooltip:true };
    const BARS_WIDTH = 480;

    const fitSpec = (spec,h=null,w=null)=>{
      const s=JSON.parse(JSON.stringify(spec));
      s.autosize={type:"fit",contains:"padding"};
      s.width=w||"container"; if(h!=null) s.height=h;
      s.config=s.config||{};
      s.config.axis={labelFont:"Helvetica",titleFont:"Helvetica",labelFontSize:12,titleFontSize:13};
      s.config.legend={labelFont:"Helvetica",titleFont:"Helvetica",labelFontSize:12,titleFontSize:13};
      s.config.title={font:"Helvetica",fontSize:18,subtitleFont:"Helvetica",subtitleFontSize:14};
      return s;
    };

    const MAP_SPEC={
        "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
        "width": 800,
        "height": 700,
        "title": {
          "text": "Melbourne and Surroundings: Population Density and Green Space (2024)",
          "subtitle": "Choropleth = population density (people/km²), Circles = green space (%)",
          "fontSize": 20,
          "anchor": "middle",
          "offset": 10
        },
        "projection": {"type": "mercator","center": [145.0, -37.5],"scale": 55000,"translate": [400, 50]},
        "layer": [
          {
            "data": {
              "url": "https://raw.githubusercontent.com/navbataan/3179/main/green_space_vic.json",
              "format": {"type": "topojson", "feature": "green_space_vic"}
            },
            "transform": [{"filter": "datum.properties.state_name_2021 == 'Victoria'"}],
            "mark": {"type": "geoshape","stroke": "white","strokeWidth": 0.5},
            "encoding": {
              "color": {
                "field": "properties.pop_density_2024_people_per_km2",
                "type": "quantitative",
                "title": "Population Density (people/km²)",
                "scale": {"scheme": "blues"}
              },
              "tooltip": [
                {"field": "properties.lga_name_2024", "title": "Local Government Area"},
                {"field": "properties.pop_density_2024_people_per_km2",
                 "title": "Population Density (people/km²)", "format": ",.0f"}
              ]
            }
          },
          {
            "data": {"url": "https://raw.githubusercontent.com/navbataan/3179/main/centroids_clean.csv"},
            "transform": [{"filter": "datum.state_name == 'Victoria'"}],
            "mark": {"type": "circle","color": "darkgreen","stroke": "white","strokeWidth": 0.7,"opacity": 0.75},
            "encoding": {
              "longitude": {"field": "X","type": "quantitative"},
              "latitude": {"field": "Y","type": "quantitative"},
              "size": {
                "field": "Green_Pct","type": "quantitative","title": "Green Space (%)",
                "scale": {"domain": [0, 100], "range": [30, 1500]},
                "legend": {"symbolFillColor": "darkgreen"}
              },
              "tooltip": [
                {"field": "lga_name_2", "title": "Local Government Area"},
                {"field": "Green_Pct", "title": "Green Space (%)", "format": ".1f"}
              ]
            }
          }
        ],
        "config": {
          "background": "white",
          "view": {"stroke": "transparent"},
          "legend": {"titleFontSize": 12, "labelFontSize": 10, "orient": "bottom"}
        }
      }; 

    const SCATTER_SPEC={
        "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
        "title": {
            "text": "Green Space (%) vs Population Density (people/km²) for Victoria LGAs",
            "subtitle": "Each dot represents a Victorian Local Government Area (2024)",
            "fontSize": 18,
            "anchor": "middle"
        },
        "width": 700,
        "height": 500,
        "data": {"url": "https://raw.githubusercontent.com/navbataan/3179/main/centroids_clean.csv"},
        "params": [{
            "name": "Region",
            "bind": {
            "input": "select",
            "options": ["All", "Metropolitan", "Regional"],
            "labels": ["All Victoria", "Metropolitan", "Regional"],
            "name": "Filter by Region: "
            },
            "value": "All"
        }],
        "transform": [{"filter": "Region == 'All' || datum.Region == Region"}],
        "layer": [
            {
            "mark": {"type": "circle", "color": "#006400", "opacity": 0.75, "size": 250},
            "encoding": {
                "x": {"field": "pop_densit", "type": "quantitative", "title": "Population Density (people/km²)"},
                "y": {"field": "Green_Pct", "type": "quantitative", "title": "Green Space (%)"},
                "tooltip": [
                {"field": "lga_name_2", "title": "Local Government Area"},
                {"field": "pop_densit", "title": "Population Density (people/km²)", "format": ",.0f"},
                {"field": "Green_Pct", "title": "Green Space (%)", "format": ".1f"},
                {"field": "Region", "title": "Region"}
                ]
            }
            },

            {
            "transform": [{"filter": "Region != 'Regional'"}],
            "mark": {"type": "text", "color": "darkgreen", "fontSize": 12, "dx": 10, "dy": -10},
            "encoding": {
                "x": {"datum": 5000},
                "y": {"datum": 15},
                "text": {"value": "Inner-city LGAs: high density, low green space"}
            }
            },
            {
            "transform": [{"filter": "Region != 'Regional'"}],
            "mark": {"type": "text", "color": "#2f855a", "fontSize": 12, "dx": 10, "dy": -10},
            "encoding": {
                "x": {"datum": 300},
                "y": {"datum": 45},
                "text": {"value": "Outer suburbs: more green space per capita"}
            }
            },

            {
            "transform": [{"filter": "Region == 'Regional'"}],
            "mark": {"type": "text", "color": "#1a202c", "fontSize": 13, "fontWeight": "bold", "dx": 10, "dy": -10},
            "encoding": {
                "x": {"datum": 600},
                "y": {"datum": 40},
                "text": {"value": "Regional LGAs show greater variation in green space\nreflecting diverse landscapes and land use patterns."}
            }
            }
        ],
        "config": {
            "background": "white",
            "view": {"stroke": "transparent"},
            "axis": {"labelFontSize": 11, "titleFontSize": 12},
            "legend": {"orient": "bottom"}
        }
        }; 
    
    // === BAR TOP ===
    const BARS_TOP_SPEC={
        "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
        "title": {"text": "Top and Bottom Victorian LGAs by Green Space (%)",
                    "subtitle": "Grouped by population density category (2024)",
                    "anchor": "middle","fontSize": 16},
        "width": 500,"height": 500,
        "data": {"url": "https://raw.githubusercontent.com/navbataan/3179/main/centroids_clean.csv"},
        "transform": [
            {"calculate": "datum.pop_densit < 1000 ? 'Low Density' : datum.pop_densit < 3000 ? 'Medium Density' : 'High Density'",
            "as": "Density_Group"},
            {"window": [{"op": "rank", "as": "rank"}],
            "sort": [{"field": "Green_Pct", "order": "descending"}]},
            {"filter": "datum.rank <= 10 || datum.rank >= (datum.total - 10)"}
        ],
        "layer": [
            {
            "mark": {"type": "bar","opacity": 1.0},
            "encoding": {
                "y": {"field": "lga_name_2","type": "ordinal","sort": "-x","title": "Local Government Area",
                    "axis": {"labelFontSize": 10}},
                "x": {"field": "Green_Pct","type": "quantitative","title": "Green Space (%)"},
                "color": {"field": "Density_Group","type": "nominal","title": "Density Category",
                        "scale": {"range": ["#e8f5e9", "#81c784", "#1b5e20"]}},
                "tooltip": [
                {"field": "lga_name_2","title": "LGA"},
                {"field": "Green_Pct","title": "Green Space (%)","format": ".1f"},
                {"field": "pop_densit","title": "Population Density (people/km²)","format": ",.0f"},
                {"field": "Density_Group","title": "Density Category"}
                ]
            }
            },
            {
            "mark": {"type": "text","color": "#1a202c","fontSize": 12,"fontWeight": "bold"},
            "encoding": {
                "x": {"datum": 35},
                "y": {"datum": "Yarra Ranges"},
                "text": {"value": "Outer LGAs: abundant open space"}
            }
            },
            {
            "mark": {"type": "text","color": "#b91c1c","fontSize": 12,"fontWeight": "bold"},
            "encoding": {
                "x": {"datum": 8},
                "y": {"datum": "Melbourne"},
                "text": {"value": "Inner LGAs: scarce green cover"}
            }
            }
        ],
        "config": {"legend": {"orient": "bottom"}}
        }; // (your top green-space annotated bar chart)

    // === BAR BOTTOM ===
    const BARS_BOT_SPEC={
        "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
        "title": {"text": "Top & Bottom Victorian LGAs by Population Density (people/km²)",
                    "subtitle": "Grouped by population density category (2024)",
                    "anchor": "middle","fontSize": 16},
        "width": 500,"height": 500,
        "data": {"url": "https://raw.githubusercontent.com/navbataan/3179/main/centroids_clean.csv"},
        "transform": [
            {"calculate": "datum.pop_densit < 1000 ? 'Low Density' : datum.pop_densit < 3000 ? 'Medium Density' : 'High Density'",
            "as": "Density_Group"},
            {"window": [{"op": "rank", "as": "rank"}],
            "sort": [{"field": "pop_densit", "order": "descending"}]},
            {"filter": "datum.rank <= 10 || datum.rank >= (datum.total - 10)"}
        ],
        "layer": [
            {
            "mark": {"type": "bar","opacity": 1.0},
            "encoding": {
                "y": {"field": "lga_name_2","type": "ordinal","sort": "-x","title": "Local Government Area",
                    "axis": {"labelFontSize": 10}},
                "x": {"field": "pop_densit","type": "quantitative",
                    "title": "Population Density (people/km²)"},
                "color": {"field": "Density_Group","type": "nominal","title": "Density Category",
                        "scale": {"range": ["#e8f5e9", "#81c784", "#1b5e20"]}},
                "tooltip": [
                {"field": "lga_name_2","title": "LGA"},
                {"field": "Green_Pct","title": "Green Space (%)","format": ".1f"},
                {"field": "pop_densit","title": "Population Density (people/km²)","format": ",.0f"},
                {"field": "Density_Group","title": "Density Category"}
                ]
            }
            },
            {
            "mark": {"type": "text","color": "#1a202c","fontSize": 12,"fontWeight": "bold"},
            "encoding": {
                "x": {"datum": 5000},
                "y": {"datum": "Melbourne"},
                "text": {"value": "Urban core: extremely dense"}
            }
            },
            {
            "mark": {"type": "text","color": "#2f855a","fontSize": 12,"fontWeight": "bold"},
            "encoding": {
                "x": {"datum": 200},
                "y": {"datum": "Yarra Ranges"},
                "text": {"value": "Outer regions: low density, more space"}
            }
            }
        ],
        "config": {"legend": {"orient": "bottom"}}
        }; // (your population-density annotated bar chart)

    // === BOX ===
    const BOX_SPEC={
        "$schema": "https://vega.github.io/schema/vega-lite/v6.json",
        "title": "Green Space Distribution by Density Group (Victoria, 2024)",
        "data": {"url": "https://raw.githubusercontent.com/navbataan/3179/main/centroids_clean.csv"},
        "transform": [
            {"filter": "datum.state_name == 'Victoria'"},
            {"filter": "isValid(datum.Green_Pct) && datum.Green_Pct > 0"},
            {"calculate": "datum.pop_densit < 1000 ? 'Low Density' : datum.pop_densit < 3000 ? 'Medium Density' : 'High Density'",
            "as": "Density_Group"}
        ],
        "encoding": {
            "y": {"field": "Density_Group","type": "nominal","title": "Density Category",
                "sort": ["Low Density","Medium Density","High Density"]}
        },
        "layer": [
            {
            "transform": [{
                "aggregate": [
                {"op": "q1","field": "Green_Pct","as": "q1"},
                {"op": "q3","field": "Green_Pct","as": "q3"},
                {"op": "min","field": "Green_Pct","as": "lower"},
                {"op": "max","field": "Green_Pct","as": "upper"},
                {"op": "median","field": "Green_Pct","as": "median"}
                ],
                "groupby": ["Density_Group"]
            }],
            "mark": {"type": "bar","size": 14,"stroke": "black","strokeWidth": 0.5},
            "encoding": {
                "x": {"field": "q1","type": "quantitative","title": "Green Space (%)"},
                "x2": {"field": "q3"},
                "y": {"field": "Density_Group","type": "nominal"},
                "color": {"field": "Density_Group","type": "nominal","legend": null},
                "tooltip": [
                {"field": "Density_Group","title": "Density Category"},
                {"field": "lower","title": "Min (%)","format": ".1f"},
                {"field": "median","title": "Median (%)","format": ".1f"},
                {"field": "upper","title": "Max (%)","format": ".1f"},
                {"field": "q1","title": "Q1 (%)","format": ".1f"},
                {"field": "q3","title": "Q3 (%)","format": ".1f"}
                ]
            }
            },
            {
            "mark": {"type": "rule","color": "black"},
            "encoding": {
                "x": {"field": "lower","type": "quantitative"},
                "x2": {"field": "upper"},
                "y": {"field": "Density_Group","type": "nominal"}
            }
            },
            {
            "mark": {"type": "tick","color": "white","size": 14},
            "encoding": {
                "x": {"field": "median","type": "quantitative"},
                "y": {"field": "Density_Group","type": "nominal"}
            }
            },
            {
            "mark": {"type": "text","color": "#1a202c","fontSize": 12,"fontWeight": "bold","dx": 10,"dy": -10},
            "encoding": {
                "x": {"datum": 55},
                "y": {"datum": "Low Density"},
                "text": {"value": "Wide spread →\nSemi-rural + suburban mix"}
            }
            },
            {
            "mark": {"type": "text","color": "#2f855a","fontSize": 12,"dx": 10,"dy": -10},
            "encoding": {
                "x": {"datum": 25},
                "y": {"datum": "High Density"},
                "text": {"value": "Tight range →\nLimited green space"}
            }
            }

        ],
        "width": 450,"height": 400,
        "config": {"view": {"stroke": "transparent"},"legend": {"orient": "bottom"}}
        }; // (your final box plot with compact annotations)

    // === HIST ===
    const HIST_SPEC={
        "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
        "title": {"text": "Distribution of Green Space Across Victorian LGAs"},
        "data": {"url": "https://raw.githubusercontent.com/navbataan/3179/main/centroids_clean.csv"},
        "transform": [{"filter": "datum.state_name == 'Victoria'"}],
        "layer": [
            {
            "mark": "bar",
            "encoding": {
                "x": {"bin": true,"field": "Green_Pct","title": "Green Space (%)"},
                "y": {"aggregate": "count","title": "Number of LGAs"},
                "color": {"value": "#388e3c"},
                "tooltip": [{"aggregate": "count","title": "Number of LGAs"}]
            }
            },
            {
            "mark": {"type": "text", "color": "#1a202c", "fontSize": 12, "fontWeight": "bold"},
            "encoding": {
                "x": {"datum": 20},
                "y": {"datum": 18},
                "text": {"value": "Most LGAs fall between\n10–30% green space"}
            }
            },
            {
            "mark": {"type": "text", "color": "#2f855a", "fontSize": 11, "dx": 10},
            "encoding": {
                "x": {"datum": 60},
                "y": {"datum": 8},
                "text": {"value": "A few LGAs have very high\ncoverage (outer regions)"}
            }
            }

        ],
        "width": 600,"height": 400,
        "config": {"legend": {"orient": "bottom"}}
        }; // (your histogram with annotations)

    // embed all
    const embed=(sel,spec,h,w)=>vegaEmbed(sel,fitSpec(spec,h,w),opts).catch(console.error);
    embed("#chart-map",MAP_SPEC,460);
    embed("#chart-scatter",SCATTER_SPEC,360);
    embed("#chart-bars-top",BARS_TOP_SPEC,340,BARS_WIDTH);
    embed("#chart-bars-bottom",BARS_BOT_SPEC,340,BARS_WIDTH);
    embed("#chart-box",BOX_SPEC,320);
    embed("#chart-hist",HIST_SPEC,320);
  </script>
</body>
</html>
